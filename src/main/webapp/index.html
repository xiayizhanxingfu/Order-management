<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>login</title>
        <script src="js/jquery-3.4.1.js"></script>
    </head>
    <body>
        <div style="text-align: center;">
            <label>Account:<input name="userAccount"></label><br>
            <label>Password:<input name="userPwd" type="password"></label><br>
            identity:
            <label><input name="userIdentity" type="radio" value="1">厨师</label>
            <label><input name="userIdentity" type="radio" value="2">服务员</label>
            <label><input name="userIdentity" type="radio" value="3">客户</label>
            <br>
            <button id="login">登录</button>
            <button id="register">注册</button>
        </div>
        <script type="text/javascript">
            var baseUrl = "http://localhost:8080/test";
            $(function () {
                $("#login").on("click", login);
                $("#register").on("click", register);
            });

            function login() {
                $.ajax({
                    url: "login",
                    type: "POST",
                    data: {
                        userAccount: $("[name='userAccount']").val(),
                        userPwd: $("[name='userPwd']").val(),
                        userIdentity: $("[name='userIdentity']:checked").val()
                    },
                    dataType: "json",
                    success: function (json) {
                        if (json.status === "error") {
                            alert("账号或者密码错误");
                        } else {
                            var url;
                            switch ($("[name='userIdentity']:checked").val()) {
                                case "1":
                                    //厨师
                                    url = baseUrl + "/chef/taskList.html";
                                    break;
                                case "2":
                                    url = baseUrl + "/waiter/taskList.html";
                                    //服务员
                                    break;
                                case "3":
                                    //顾客
                                    url = baseUrl + "/client/foodList.html";
                                    break;
                            }
                            window.location.href = url;
                        }
                    }
                });
            }

            function register() {
                window.location.href = baseUrl + "/register.html";
            }
        </script>
    </body>
</html>